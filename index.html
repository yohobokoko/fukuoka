<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‹å®¶åŒ—ä¹å·å…­æ—¥è¡Œ | äº’å‹•æ—…è¡Œæ‰‹å¸³</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Chosen Palette: [Warm Ghibli Journal] */
        :root {
            --bg-paper: #fcf9ee;
            --text-ink: #4a4a4a;
            --primary-accent: #d97706; /* Warm Orange */
            --secondary-accent: #84cc16; /* Soft Green */
        }

        body {
            font-family: 'Zen Maru Gothic', 'Noto Sans TC', sans-serif;
            background-color: var(--bg-paper);
            color: var(--text-ink);
            background-image: radial-gradient(#e5e7eb 1px, transparent 1px);
            background-size: 24px 24px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 4px; }

        /* Card Hover Effects */
        .hover-card { transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .hover-card:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }

        /* Filter Button Active State */
        .filter-btn.active { background-color: var(--primary-accent); color: white; border-color: var(--primary-accent); }
        
        /* Sketch Box Style */
        .sketch-box { border: 2px dashed #d97706; border-radius: 1rem; position: relative; background: #fff; }
        .sketch-pin { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 20px; height: 20px; background: #ef4444; border-radius: 50%; box-shadow: 2px 2px 5px rgba(0,0,0,0.2); z-index: 10; }

        /* Image Styling */
        .sketch-img-container { overflow: hidden; border: 6px solid #fff; border-radius: 2px 255px 3px 25px / 255px 5px 225px 5px; box-shadow: 5px 5px 15px rgba(0,0,0,0.15); transition: transform 0.3s ease; position: relative; background: #fff; }
        .sketch-img-container:hover { transform: scale(1.02) rotate(1deg); }
        img { width: 100%; height: 100%; object-fit: cover; filter: sepia(0.2) contrast(1.1); }
        .img-label { position: absolute; bottom: 10px; right: 10px; background: rgba(255, 255, 255, 0.9); color: #574c3e; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; box-shadow: 1px 1px 3px rgba(0,0,0,0.2); }

        /* Fade Animation */
        .fade-enter { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Chat Widget Styles */
        #chat-widget { position: fixed; bottom: 90px; right: 20px; width: 350px; height: 500px; background: white; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.25); display: none; flex-direction: column; z-index: 100; overflow: hidden; border: 1px solid #e2e8f0; animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        #chat-header { background: linear-gradient(135deg, #d97706, #b45309); color: white; padding: 16px; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
        #chat-messages { flex: 1; padding: 16px; overflow-y: auto; background: #fffbef; display: flex; flex-direction: column; gap: 12px; }
        #chat-input-area { padding: 12px; border-top: 1px solid #e6dbb8; display: flex; gap: 8px; background: white; }
        .message { max-width: 85%; padding: 10px 14px; border-radius: 12px; font-size: 0.9rem; line-height: 1.5; word-wrap: break-word; }
        .user-msg { background: #d97706; color: white; align-self: flex-end; border-bottom-right-radius: 2px; }
        .ai-msg { background: #fff; color: #574c3e; border: 1px solid #e6dbb8; align-self: flex-start; border-bottom-left-radius: 2px; }
        .typing-indicator { font-style: italic; color: #6b7280; font-size: 0.75rem; margin-left: 16px; margin-bottom: 8px; display: none; }
        #ai-toggle-btn { position: fixed; bottom: 100px; right: 20px; background: linear-gradient(135deg, #d97706, #f59e0b); color: white; width: 56px; height: 56px; border-radius: 50%; box-shadow: 0 4px 12px rgba(217, 119, 6, 0.4); display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 99; transition: all 0.2s; font-size: 24px; }
        #ai-toggle-btn:hover { transform: scale(1.1); }

        /* Print Hiding */
        @media print {
            body { background-color: white; background-image: none; }
            .no-print { display: none !important; }
            #chat-widget, #ai-toggle-btn { display: none !important; }
        }

        /* Todo Input removed for read-only view, but keeping basic styles just in case */
        .todo-input { border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 0.3rem 0.6rem; width: 100%; transition: all 0.2s; font-size: 0.9rem; }
        .todo-input:focus { outline: none; border-color: #d97706; ring: 2px solid #fdba74; }
    </style>
    <script>
        function imgError(image) {
            const container = image.closest('.sketch-img-container');
            if (container) container.style.display = 'none';
            return true;
        }
    </script>
</head>
<body>

    <!-- AI Toggle Button -->
    <div id="ai-toggle-btn" class="no-print" onclick="toggleChat()">âœ¨</div>

    <!-- AI Chat Widget -->
    <div id="chat-widget" class="no-print">
        <div id="chat-header">
            <div class="flex items-center gap-2"><span>ğŸ¤– ç‹å®¶æ—…éŠ AI å°éŠ</span></div>
            <button onclick="toggleChat()" class="text-white hover:text-gray-200 text-xl font-bold">&times;</button>
        </div>
        <div id="chat-messages">
            <div class="message ai-msg">
                å“ˆå›‰ï¼æˆ‘æ˜¯æ‚¨çš„ä¹å· AI å°éŠã€‚<br>
                æ‰€æœ‰è¡Œç¨‹éƒ½å·²ç¶“å®šæ¡ˆå›‰ï¼<br>
                å¾ 1/22 åˆ° 1/27ï¼Œäº«å—é€™è¶Ÿç¾å¥½çš„æ—…ç¨‹å§ï¼ğŸŒ¿<br>
                (æ­¤ç‰ˆæœ¬ç‚ºç´”ç€è¦½æ¨¡å¼)
            </div>
        </div>
        <div class="typing-indicator" id="typing-indicator">Gemini æ­£åœ¨æŸ¥è©¢...</div>
        <div id="chat-input-area">
            <input type="text" id="user-input" class="flex-1 border rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-yellow-500 focus:ring-1 focus:ring-yellow-500" placeholder="ä¾‹å¦‚ï¼šç”±å¸ƒé™¢ä¹‹æ£®åœ¨å“ªæ­ï¼Ÿ..." onkeypress="handleKeyPress(event)">
            <button onclick="sendMessage()" class="bg-yellow-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-yellow-700 font-medium">é€å‡º</button>
        </div>
    </div>

    <div class="page-container" id="brochure-content">
        <!-- Cover -->
        <div class="text-center border-b-2 border-dashed border-gray-300 pb-8 mb-8 relative pt-10">
            <div id="main-title-container">
                <h1 class="text-4xl font-bold text-yellow-900 mb-2 tracking-wide">ç‹å®¶åŒ—ä¹å·å…­æ—¥è¡Œ</h1>
                <p class="text-gray-600 text-lg font-medium">å¤§åˆ† âœ• åˆ¥åºœ âœ• æŸ³å· âœ• ç¦å²¡</p>
                <p class="text-orange-500 text-md font-bold mt-2">2025.1.22 (å››) - 1.27 (äºŒ)</p>
            </div>
        </div>

        <nav class="flex gap-2 mb-6 overflow-x-auto pb-2 md:pb-0">
            <button onclick="switchView('itinerary')" class="nav-btn flex-shrink-0 bg-orange-100 text-orange-700 px-4 py-2 rounded-lg text-sm font-bold hover:bg-orange-200 transition whitespace-nowrap">ğŸ“… è©³ç´°è¡Œç¨‹</button>
            <button onclick="switchView('info')" class="nav-btn flex-shrink-0 bg-white text-gray-600 border border-gray-200 px-4 py-2 rounded-lg text-sm font-bold hover:bg-gray-50 transition whitespace-nowrap">â„¹ï¸ æ—…ç¨‹é‡é»</button>
            <button onclick="switchView('transport')" class="nav-btn flex-shrink-0 bg-white text-gray-600 border border-gray-200 px-4 py-2 rounded-lg text-sm font-bold hover:bg-gray-50 transition whitespace-nowrap">ğŸš äº¤é€šæ”»ç•¥</button>
            <button onclick="switchView('todo')" class="nav-btn flex-shrink-0 bg-white text-gray-600 border border-gray-200 px-4 py-2 rounded-lg text-sm font-bold hover:bg-gray-50 transition whitespace-nowrap">ğŸ“ å¾…è¾¦äº‹é …</button>
            <button onclick="switchView('souvenir')" class="nav-btn flex-shrink-0 bg-white text-gray-600 border border-gray-200 px-4 py-2 rounded-lg text-sm font-bold hover:bg-gray-50 transition whitespace-nowrap">ğŸ å¿…è²·ä¼´æ‰‹ç¦®</button>
            <button onclick="switchView('vjw')" class="nav-btn flex-shrink-0 bg-blue-100 text-blue-700 border border-blue-200 px-4 py-2 rounded-lg text-sm font-bold hover:bg-blue-200 transition whitespace-nowrap">ğŸ“± VJW æ•™å­¸</button>
        </nav>

        <main class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            <!-- Sidebar (Only Day Selection now) -->
            <aside class="lg:col-span-3 space-y-6" id="sidebar-container">
                <div id="day-selector-block" class="bg-white rounded-2xl shadow-sm border border-gray-100 p-4 sticky top-6">
                    <h3 class="text-gray-500 text-xs font-bold uppercase tracking-wider mb-3">é¸æ“‡å¤©æ•¸</h3>
                    <div class="grid grid-cols-2 gap-2 lg:grid-cols-1" id="day-nav"></div>
                </div>
            </aside>

            <!-- Content -->
            <section class="lg:col-span-9 space-y-6" id="main-content">
                <!-- Content injected here -->
            </section>
        </main>

        <footer class="text-center text-xs text-gray-400 mt-10 mb-20">
            * åœ–ç‰‡ä¾†æºï¼šWikimedia Commons (Public Domain / CC-BY)ï¼Œä¸¦å¥—ç”¨ CSS æ¿¾é¡æ¨¡æ“¬æ‰‹ç¹ªé¢¨æ ¼ã€‚
        </footer>
    </div>

    <!-- Templates -->
    <template id="info-template">
        <div class="space-y-6 animate-fade-in fade-enter">
            <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-3xl p-8 border border-orange-200 relative overflow-hidden">
                <div class="relative z-10" id="intro-text-container">
                     <h2 class="text-3xl font-bold text-orange-900 mb-4">æ—…ç¨‹æ¦‚è¦½</h2>
                    <p class="text-orange-800 opacity-90 leading-relaxed text-lg">é€™æ˜¯ä¸€è¶Ÿç‚ºç‹å®¶é‡èº«æ‰“é€ çš„å…­æ—¥åŒ—ä¹å·ä¹‹æ—…ã€‚æˆ‘å€‘å°‡é€ è¨ªå¤§åˆ†ã€åˆ¥åºœã€ç”±å¸ƒé™¢ã€æŸ³å·èˆ‡ç¦å²¡ã€‚<br>è¡Œç¨‹åŒ…å«äº†æº«æ³‰ã€è§€å…‰åˆ—è»Šã€éŠèˆ¹ä»¥åŠç•¶åœ°çš„ç‰¹è‰²ç¾é£Ÿã€‚<br>è«‹æ”¾æ…¢è…³æ­¥ï¼Œäº«å—é€™æ®µç¾å¥½çš„æ—…ç¨‹ã€‚</p>
                </div>
                <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-orange-200 rounded-full opacity-50 blur-2xl"></div>
            </div>

            <!-- Integrated Info Section -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-5 rounded-2xl border-2 border-dashed border-yellow-200 shadow-sm">
                    <h3 class="font-bold text-yellow-800 mb-3 flex items-center text-lg">ğŸ¨ ä½å®¿å°å±‹</h3>
                    <div class="mb-4 pl-2 border-l-4 border-pink-300">
                        <span class="text-xs font-bold text-pink-600">1/22-23 (Day 1-2)</span>
                        <p class="font-bold mt-1 text-gray-800">JR Kyushu Hotel Blossom Oita</p>
                        <p class="text-sm text-gray-500">JRå¤§åˆ†ç«™ç›´çµã€‚é ‚æ¨“éœ²å¤©æº«æ³‰è¶…è®šï¼</p>
                    </div>
                    <div class="pl-2 border-l-4 border-blue-300">
                        <span class="text-xs font-bold text-blue-600">1/24-26 (Day 3-5)</span>
                        <p class="font-bold mt-1 text-gray-800">ä¸‰äº•èŠ±åœ’é£¯åº—ç¦å²¡ç¥‡åœ’</p>
                        <p class="text-sm text-gray-500">åšå¤šç«™æ­¥è¡Œ7åˆ†ï¼Œåšå¤šé‹æ²³åŸæ—ã€‚</p>
                    </div>
                </div>
                <div class="bg-white p-5 rounded-2xl border-2 border-dashed border-yellow-200 shadow-sm">
                    <h3 class="font-bold text-yellow-800 mb-3 flex items-center text-lg">ğŸ›« äº¤é€šèˆ‡ç¥¨åˆ¸</h3>
                    <ul class="text-sm space-y-3 text-gray-600">
                        <li class="flex justify-between items-center border-b border-gray-100 pb-2">
                            <span>1/22 (å››) æŠµé”ç¦å²¡ï¼š</span>
                            <span class="font-bold text-gray-900 bg-gray-100 px-2 py-1 rounded">11:15</span>
                        </li>
                        <li class="flex justify-between items-center border-b border-gray-100 pb-2">
                            <span>1/27 (äºŒ) é›¢é–‹ç¦å²¡ï¼š</span>
                            <span class="font-bold text-gray-900 bg-gray-100 px-2 py-1 rounded">15:55</span>
                        </li>
                        <li class="pt-1">
                            <p class="font-bold text-gray-800 mb-1">ğŸ« é‡é»ç¥¨åˆ¸</p>
                            <ul class="list-disc pl-5 space-y-1 text-xs">
                                <li><b>1/24 (å…­) ç”±å¸ƒé™¢ä¹‹æ£®</b> (éœ€æå‰åŠƒä½)</li>
                                <li><b>1/25 (æ—¥) å¤ªå®°åºœæŸ³å·å¥—ç¥¨</b> (è¥¿éµå¤©ç¥ç«™è²·)</li>
                                <li>å…¶é¤˜äº¤é€šä½¿ç”¨ JR è»Šç¥¨æˆ– IC å¡</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Sketch Note -->
            <div class="sketch-box p-6 mt-6">
                <div class="sketch-pin"></div>
                <h3 class="font-bold text-gray-700 mb-2 text-center">ğŸ’ å¿…å¸¶ç‰©å“æé†’</h3>
                <div class="text-sm text-gray-600 text-center leading-relaxed space-y-1">
                    <p>âœ… <b>è­·ç…§</b> (æ•ˆæœŸéœ€6å€‹æœˆä»¥ä¸Š)</p>
                    <p>âœ… <b>VJW æˆªåœ–</b> (å…¥å¢ƒå¯©æŸ¥ç”¨)</p>
                    <p>âœ… <b>æ—¥å¹£ç¾é‡‘</b> (æ­èˆ¹ã€å±‹å°ã€å°åº—ç”¨)</p>
                    <p>âœ… <b>å¥½èµ°çš„é‹å­</b> (æ¯å¤©éƒ½è¦èµ°å¾ˆå¤šè·¯ï¼)</p>
                </div>
            </div>
        </div>
    </template>

    <template id="itinerary-template">
        <div class="space-y-6 animate-fade-in fade-enter">
            <div class="bg-white rounded-3xl p-6 shadow-sm border border-gray-100 relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-orange-100 rounded-full mix-blend-multiply filter blur-3xl opacity-50 transform translate-x-10 -translate-y-10"></div>
                <h2 id="day-title" class="text-3xl font-bold text-gray-800 relative z-10">Day 1</h2>
                <p id="day-desc" class="text-gray-500 mt-2 relative z-10 font-medium text-lg">Loading...</p>
                <div class="mt-4 flex gap-2" id="day-tags"></div>
            </div>
            
            <!-- Timeline Container -->
            <div class="relative space-y-4 before:content-[''] before:absolute before:left-[52px] md:before:left-[60px] before:top-4 before:bottom-4 before:w-0.5 before:bg-gray-200" id="timeline-container"></div>
            
            <!-- Navigation Footer -->
            <div class="flex justify-between mt-8 pt-4 border-t border-gray-100" id="timeline-nav-footer"></div>
        </div>
    </template>

    <template id="transport-template">
        <div class="space-y-6 animate-fade-in fade-enter">
            <div class="bg-blue-50 rounded-3xl p-8 border border-blue-200 relative overflow-hidden">
                <div class="relative z-10">
                    <h2 class="text-3xl font-bold text-blue-900 mb-2">ğŸš äº¤é€šæ”»ç•¥ (æ™‚åˆ»è¡¨å»ºè­°)</h2>
                    <p class="text-blue-800 opacity-90 text-lg">å…å»è¿·è·¯ç…©æƒ±ï¼é€™æ˜¯ç‚ºæ‚¨æ•´ç†çš„æœ€ä½³è»Šæ¬¡ã€‚</p>
                </div>
            </div>

            <!-- Uber/Taxi Tip Box -->
            <div class="bg-yellow-50 p-4 rounded-xl border border-yellow-200 mb-6 shadow-sm">
                <h3 class="font-bold text-yellow-800 mb-2 flex items-center gap-2">
                    <span class="text-xl">ğŸš•</span> è°æ˜ç§»å‹•æ’‡æ­¥ï¼šå–„ç”¨ Uber / è¨ˆç¨‹è»Š
                </h3>
                <p class="text-sm text-yellow-800 leading-relaxed">
                    åœ¨ä¹å·ï¼ˆç‰¹åˆ¥æ˜¯ç¦å²¡å¸‚å€ã€ç”±å¸ƒé™¢ã€åˆ¥åºœï¼‰ï¼Œ<b>Uber App</b> å¯ä»¥ç›´æ¥å«è¨ˆç¨‹è»Šï¼Œéå¸¸æ–¹ä¾¿ï¼<br>
                    é›–ç„¶æ¯”å¤§çœ¾é‹è¼¸è²´ä¸€é»ï¼Œä½†è‹¥æœ‰ <b>3-4 äººåˆ†æ”¤</b> å…¶å¯¦å¾ˆåˆ’ç®—ï¼Œä¸”èƒ½çœå»æ‹‰è¡Œææ‰¾é›»æ¢¯çš„éº»ç…©ã€‚<br>
                    <span class="font-bold mt-1 block">âœ¨ æ¨è–¦ä½¿ç”¨æ™‚æ©Ÿï¼š</span>
                    <ul class="list-disc pl-5 mt-1 text-xs">
                         <li><b>Day 1 & 6</b>: æ©Ÿå ´ â‡„ é£¯åº— (ä¸ç”¨è½‰è»Šæ¬è¡Œæ)</li>
                         <li><b>Day 2</b>: é‡‘é±—æ¹– â†’ ç”±å¸ƒé™¢è»Šç«™ (å›ç¨‹è…³ç— æ™‚)</li>
                         <li><b>Day 4</b>: æŸ³å·åƒå®Œé°»é­šé£¯ â†’ æŸ³å·è»Šç«™ (çœå»ç­‰æ¥é§è»Šæ™‚é–“)</li>
                    </ul>
                </p>
            </div>

            <div class="space-y-6">
                <!-- Day 1 -->
                <div class="bg-white p-5 rounded-2xl border border-gray-200 shadow-sm">
                    <h3 class="font-bold text-lg text-gray-800 mb-3 border-b pb-2 border-gray-100 flex items-center justify-between">
                        Day 1 (1/22 å››): æ©Ÿå ´ â” åšå¤š â” å¤§åˆ†
                        <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">JR Sonic</span>
                    </h3>
                    <div class="space-y-4 text-sm text-gray-700">
                        <div class="flex gap-3">
                            <span class="text-2xl flex-shrink-0">ğŸš‡</span>
                            <div>
                                <h4 class="font-bold">æ©Ÿå ´ â†’ åšå¤š (åœ°éµ)</h4>
                                <p class="text-gray-500 mb-1">ç­æ¬¡éå¸¸å¯†é›† (æ¯5-10åˆ†ä¸€ç­)</p>
                                <ul class="list-disc pl-4 text-gray-500 text-xs">
                                    <li>12:45 / 12:53 / 13:00 (é è¨ˆæ­ä¹˜å€é–“)</li>
                                    <li>è»Šç¨‹ç´„ 5 åˆ†é˜</li>
                                </ul>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <span class="text-2xl flex-shrink-0">ğŸš„</span>
                            <div>
                                <h4 class="font-bold">åšå¤š â†’ å¤§åˆ† (JR Sonic éŸ³é€Ÿè™Ÿ)</h4>
                                <div class="mt-2 space-y-2">
                                    <div class="bg-yellow-50 p-2 rounded border border-yellow-200">
                                        <span class="text-xs font-bold text-yellow-700 bg-yellow-200 px-1 rounded">æœ€æ¨è–¦</span>
                                        <b class="text-gray-800">Sonic 25 è™Ÿ</b>: åšå¤š <b class="text-red-500">13:36</b> ç™¼ â†’ å¤§åˆ† 15:43 æŠµ
                                        <p class="text-xs text-gray-500 mt-1">æ™‚é–“å……è£•ï¼Œåƒå®Œåˆé¤æ…¢æ…¢èµ°éå»å‰›å¥½ã€‚</p>
                                    </div>
                                    <div class="bg-gray-50 p-2 rounded border border-gray-200">
                                        <span class="text-xs font-bold text-gray-500 bg-gray-200 px-1 rounded">å‚™æ¡ˆ</span>
                                        <b>Sonic 27 è™Ÿ</b>: åšå¤š 13:57 ç™¼ â†’ å¤§åˆ† 16:03 æŠµ
                                    </div>
                                    <div class="bg-gray-50 p-2 rounded border border-gray-200">
                                        <span class="text-xs font-bold text-gray-500 bg-gray-200 px-1 rounded">è‹¥è¶…é †</span>
                                        <b>Sonic 23 è™Ÿ</b>: åšå¤š 13:06 ç™¼ â†’ å¤§åˆ† 15:16 æŠµ
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Day 2 -->
                <div class="bg-white p-5 rounded-2xl border border-gray-200 shadow-sm">
                    <h3 class="font-bold text-lg text-gray-800 mb-3 border-b pb-2 border-gray-100 flex items-center justify-between">
                        Day 2 (1/23 äº”): å¤§åˆ† â‡‹ ç”±å¸ƒé™¢
                        <span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full">JR æ™®é€šè»Š</span>
                    </h3>
                    <div class="space-y-4 text-sm text-gray-700">
                        <div class="flex gap-3">
                            <span class="text-2xl flex-shrink-0">ğŸš‚</span>
                            <div>
                                <h4 class="font-bold">å»ç¨‹ï¼šå¤§åˆ† â†’ ç”±å¸ƒé™¢</h4>
                                <div class="bg-yellow-50 p-2 rounded border border-yellow-200 mt-1">
                                    <span class="text-xs font-bold text-yellow-700 bg-yellow-200 px-1 rounded">æ¨è–¦ (ç¡é£½ç‰ˆ)</span>
                                    å¤§åˆ† <b class="text-red-500">10:00~10:11</b> ç™¼ â†’ ç”±å¸ƒé™¢ ~11:15 æŠµ
                                    <p class="text-xs text-gray-500">æ­ä¹˜æ™®é€šè»Šæˆ–ç‰¹æ€¥ç”±å¸ƒçš†å¯ï¼Œé€›ä¸€é€›æ¥åˆé¤ã€‚</p>
                                </div>
                                <div class="bg-gray-50 p-2 rounded border border-gray-200 mt-1">
                                     <span class="text-xs font-bold text-gray-500 bg-gray-200 px-1 rounded">å‚™æ¡ˆ (æ™šä¸€é»)</span>
                                     å¤§åˆ† <b>11:13</b> æ™®é€šè»Š â†’ ç”±å¸ƒé™¢ 12:13 æŠµ
                                     <p class="text-xs text-gray-500">ä¸‹è»Šå¾Œç›´å¥”é¤å»³ (ç«™å‰åº—) å‰›å¥½è¶•ä¸Š 12:30 é ç´„ã€‚</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <span class="text-2xl flex-shrink-0">ğŸš‚</span>
                            <div>
                                <h4 class="font-bold">å›ç¨‹ï¼šç”±å¸ƒé™¢ â†’ å¤§åˆ†</h4>
                                <div class="bg-yellow-50 p-2 rounded border border-yellow-200 mt-1">
                                    <span class="text-xs font-bold text-yellow-700 bg-yellow-200 px-1 rounded">æ¨è–¦</span>
                                    ç”±å¸ƒé™¢ <b class="text-red-500">17:53</b> ç™¼ â†’ å¤§åˆ† 18:52 æŠµ
                                    <p class="text-xs text-gray-500">å›åˆ°å¤§åˆ†å‰›å¥½æ¥ 19:00 çš„æ™šé¤ã€‚</p>
                                </div>
                                <div class="mt-1 text-xs text-gray-500">å‚™æ¡ˆ: 18:34 ç™¼ (19:30 æŠµï¼Œç¨æ™š)</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Day 3 -->
                <div class="bg-white p-5 rounded-2xl border border-gray-200 shadow-sm">
                    <h3 class="font-bold text-lg text-gray-800 mb-3 border-b pb-2 border-gray-100 flex items-center justify-between">
                        Day 3 (1/24 å…­): åˆ¥åºœåœ°ç„ & å›åšå¤š
                        <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">å·´å£« + ç”±å¸ƒé™¢ä¹‹æ£®</span>
                    </h3>
                    <div class="space-y-4 text-sm text-gray-700">
                        <div class="flex gap-3">
                            <span class="text-2xl flex-shrink-0">ğŸšŒ</span>
                            <div>
                                <h4 class="font-bold">å»ç¨‹ï¼šåˆ¥åºœç«™ â†’ æµ·åœ°ç„å‰ (é¾œä¹‹äº•å·´å£«)</h4>
                                <p class="text-xs text-gray-500 mb-1">ç­æ¬¡é »ç¹ï¼Œæ¨è–¦æ­ä¹˜ 2ã€5ã€41ã€43 è™Ÿã€‚</p>
                                <div class="bg-gray-50 p-2 rounded border border-gray-200">
                                    å»ºè­°æ­ä¹˜ï¼š<b>09:40</b> æˆ– <b>09:55</b> å·¦å³çš„ç­æ¬¡ (è»Šç¨‹ç´„20åˆ†)ã€‚
                                </div>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <span class="text-2xl flex-shrink-0">ğŸšŒ</span>
                            <div>
                                <h4 class="font-bold">å›ç¨‹ï¼šéµè¼ª/æµ·åœ°ç„ â†’ åˆ¥åºœç«™</h4>
                                <div class="bg-yellow-50 p-2 rounded border border-yellow-200">
                                    <span class="text-xs font-bold text-red-600">æ³¨æ„ï¼</span>
                                    è«‹å‹™å¿…æ­ä¸Š <b>13:40</b> å‰å¾Œçš„å·´å£«è¿”å›åˆ¥åºœç«™ï¼Œé ç•™æ™‚é–“å–è¡Œæã€‚
                                </div>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <span class="text-2xl flex-shrink-0">ğŸš‚</span>
                            <div>
                                <h4 class="font-bold">åˆ¥åºœ â†’ åšå¤š (ç”±å¸ƒé™¢ä¹‹æ£® 4è™Ÿ)</h4>
                                <div class="bg-green-50 p-2 rounded border border-green-200">
                                    åˆ¥åºœ <b class="text-red-500">14:43</b> ç™¼ â†’ åšå¤š 18:10 æŠµ<br>
                                    <span class="text-xs">å·²è¨‚ä½ï¼š2è™Ÿè»Š 5è™ŸABã€6è™ŸAB</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Day 4 -->
                <div class="bg-white p-5 rounded-2xl border border-gray-200 shadow-sm">
                    <h3 class="font-bold text-lg text-gray-800 mb-3 border-b pb-2 border-gray-100 flex items-center justify-between">
                        Day 4 (1/25 æ—¥): æŸ³å· & å¤ªå®°åºœ
                        <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full">è¥¿éµé›»è»Š</span>
                    </h3>
                    <div class="space-y-4 text-sm text-gray-700">
                        <div class="flex gap-3">
                            <span class="text-2xl flex-shrink-0">ğŸš‹</span>
                            <div>
                                <h4 class="font-bold">å¤©ç¥ â†’ æŸ³å· (è¥¿éµå¤§ç‰Ÿç”°ç·š ç‰¹æ€¥)</h4>
                                <div class="bg-yellow-50 p-2 rounded border border-yellow-200">
                                    <span class="text-xs font-bold text-yellow-700 bg-yellow-200 px-1 rounded">æ¨è–¦</span>
                                    è¥¿éµç¦å²¡(å¤©ç¥) <b class="text-red-500">09:30</b> ç™¼ â†’ æŸ³å· 10:18 æŠµ
                                    <p class="text-xs text-gray-500">é€™ç­å‰›å¥½æ¥ä¸Š 10:30-11:40 çš„éŠèˆ¹ã€‚</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <span class="text-2xl flex-shrink-0">ğŸš‹</span>
                            <div>
                                <h4 class="font-bold">æŸ³å· â†’ å¤ªå®°åºœ</h4>
                                <p class="text-xs text-gray-500 mb-1">éœ€åœ¨ã€ŒäºŒæ—¥å¸‚ã€è½‰è»Šã€‚</p>
                                <div class="bg-gray-50 p-2 rounded border border-gray-200">
                                    å»ºè­°æ­ä¹˜ï¼šæŸ³å· <b>13:35</b> ç‰¹æ€¥ â†’ äºŒæ—¥å¸‚ 14:03 (è½‰ä¹˜) â†’ å¤ªå®°åºœ 14:18 æŠµ
                                </div>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <span class="text-2xl flex-shrink-0">ğŸš‹</span>
                            <div>
                                <h4 class="font-bold">å¤ªå®°åºœ â†’ å¤©ç¥</h4>
                                <div class="bg-gray-50 p-2 rounded border border-gray-200">
                                    å»ºè­°æ­ä¹˜ï¼š<b>16:45</b> å·¦å³çš„ç­æ¬¡ â†’ å¤©ç¥ 17:15 å·¦å³æŠµ (æ¥æ™šé¤)ã€‚
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Day 5 & 6 -->
                <div class="bg-white p-5 rounded-2xl border border-gray-200 shadow-sm">
                    <h3 class="font-bold text-lg text-gray-800 mb-3 border-b pb-2 border-gray-100">Day 5 (ä¸€) & 6 (äºŒ): å¸‚å€ç§»å‹•</h3>
                    <div class="space-y-3">
                        <div class="flex gap-3">
                            <span class="text-2xl">ğŸš‡</span>
                            <div>
                                <h4 class="font-bold text-gray-700">å‰å¾€è—¥é™¢ / æ©Ÿå ´</h4>
                                <p class="text-xs text-gray-500">å…¨ç¨‹ä½¿ç”¨ <b>IC å¡</b> æ­ä¹˜åœ°éµå³å¯ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="todo-template">
        <div class="space-y-6 animate-fade-in fade-enter">
            <div class="bg-white rounded-3xl p-8 shadow-sm border border-gray-100 relative overflow-hidden">
                 <div class="relative z-10">
                    <h2 class="text-3xl font-bold text-green-700 mb-2">ğŸ“ å¾…è¾¦äº‹é … & è¡Œææ¸…å–®</h2>
                    <p class="text-gray-500">è¡Œå‰æº–å‚™ã€é ç´„æé†’ã€å¿…å¸¶ç‰©å“</p>
                </div>
                <div class="absolute top-0 right-0 w-32 h-32 bg-green-100 rounded-full mix-blend-multiply filter blur-3xl opacity-50 transform translate-x-10 -translate-y-10"></div>
            </div>

            <!-- Todo Lists by Category -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="todo-container">
                <!-- Injected by JS -->
            </div>
        </div>
    </template>

    <template id="souvenir-template">
        <div class="space-y-6 animate-fade-in fade-enter">
            <div class="bg-gradient-to-br from-pink-50 to-orange-50 rounded-3xl p-8 border border-pink-200 relative overflow-hidden">
                <div class="relative z-10">
                    <h2 class="text-3xl font-bold text-pink-900 mb-4">ğŸ ä¹å·å¿…è²·ä¼´æ‰‹ç¦®</h2>
                    <p class="text-pink-800 opacity-90 leading-relaxed text-lg">é€™è£¡ç²¾é¸äº†ç¦å²¡èˆ‡ä¹å·æœ€å—æ­¡è¿çš„ä¼´æ‰‹ç¦®æ¸…å–®ã€‚</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Sweet Classics -->
                <div class="bg-white p-5 rounded-2xl border border-gray-200 shadow-sm hover-card">
                    <h3 class="font-bold text-lg text-gray-800 mb-2 border-b pb-2 border-gray-100">ğŸ° ç¶“å…¸ç”œé»</h3>
                    <ul class="space-y-4">
                        <li class="flex gap-3 items-center">
                            <span class="text-2xl">ğŸŒ•</span>
                            <div><h4 class="font-bold text-gray-700">æ˜æœˆå ‚ åšå¤šé€šé¥…é ­</h4><p class="text-xs text-gray-500">é€£çºŒç²ççš„ç¦å²¡ä»£è¡¨éŠ˜è“ï¼Œç™½è±†æ²™é¤¡å¥¶é¦™æ¿ƒéƒã€‚</p></div>
                        </li>
                         <li class="flex gap-3 items-center">
                            <span class="text-2xl">ğŸ®</span>
                            <div><h4 class="font-bold text-gray-700">å¦‚æ°´åºµ ç­‘ç´«éº»ç³¬</h4><p class="text-xs text-gray-500">è³ªæ„Ÿçˆ†æ£šçš„æ—¥å¼é»å¿ƒï¼Œæ’’ä¸Šé»ƒè±†ç²‰æ·‹ä¸Šé»‘ç³–èœœã€‚</p></div>
                        </li>
                        <li class="flex gap-3 items-center">
                            <span class="text-2xl">ğŸ¤</span>
                            <div><h4 class="font-bold text-gray-700">å‰é‡å ‚ å°é›é¥…é ­</h4><p class="text-xs text-gray-500">é€ å‹å¯æ„›çš„å°é›ï¼Œå…§åŒ…ç¶¿å¯†é»ƒè±†æ²™ï¼Œç¶“å…¸ä¸æ•—ã€‚</p></div>
                        </li>
                        <li class="flex gap-3 items-center">
                            <span class="text-2xl">ğŸ“</span>
                            <div><h4 class="font-bold text-gray-700">AMANBERRY è‰è“å¥¶æ²¹é¤…ä¹¾</h4><p class="text-xs text-gray-500">æ–°æ™‰äººæ°£ç‹ï¼è²“èˆŒé¤…ä¹¾å¤¾è‘—ç”˜ç‹è‰è“ç™½å·§å…‹åŠ›ã€‚</p></div>
                        </li>
                    </ul>
                </div>

                <!-- Savory & Snacks -->
                <div class="bg-white p-5 rounded-2xl border border-gray-200 shadow-sm hover-card">
                    <h3 class="font-bold text-lg text-gray-800 mb-2 border-b pb-2 border-gray-100">ğŸ˜ é¹¹é£Ÿ & ä¸‹é…’èœ</h3>
                    <ul class="space-y-4">
                        <li class="flex gap-3 items-center">
                            <span class="text-2xl">ğŸ¦</span>
                            <div><h4 class="font-bold text-gray-700">ç¦å¤ªéƒ æ˜å¤ªå­ä»™è² (Menbei)</h4><p class="text-xs text-gray-500">ç¦å²¡æœ€å¤¯ä¼´æ‰‹ç¦®ä¹‹ä¸€ï¼é…¥è„†å¾®è¾£ï¼Œæµ·é®®å‘³æ¿ƒéƒã€‚</p></div>
                        </li>
                         <li class="flex gap-3 items-center">
                            <span class="text-2xl">ğŸŒ¯</span>
                            <div><h4 class="font-bold text-gray-700">åƒé³¥å±‹æœ¬å®¶ æ²å¿ƒé…¥</h4><p class="text-xs text-gray-500">Tirolian æ²å¿ƒé…¥ï¼ŒåŒ…è‘—é¦™è‰ã€å’–å•¡ç­‰å¥¶æ²¹é¤¡ã€‚</p></div>
                        </li>
                        <li class="flex gap-3 items-center">
                            <span class="text-2xl">ğŸ</span>
                            <div><h4 class="font-bold text-gray-700">äºŒé¶´å ‚ åšå¤šä¹‹å¥³</h4><p class="text-xs text-gray-500">å¹´è¼ªè›‹ç³•åŒ…è‘—ç´…è±†ç¾Šç¾¹ï¼Œå£æ„Ÿæ¿•æ½¤ï¼Œåšå¤šå‚³çµ±ç¾å‘³ã€‚</p></div>
                        </li>
                    </ul>
                </div>

                <!-- Seasoning & Ramen -->
                <div class="bg-white p-5 rounded-2xl border border-gray-200 shadow-sm hover-card md:col-span-2">
                    <h3 class="font-bold text-lg text-gray-800 mb-2 border-b pb-2 border-gray-100">ğŸœ èª¿å‘³èˆ‡æ‹‰éºµ</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <ul class="space-y-4">
                            <li class="flex gap-3 items-center">
                                <span class="text-2xl">ğŸœ</span>
                                <div><h4 class="font-bold text-gray-700">ä¸€è˜­æ‹‰éºµ / åšå¤šæ‹‰éºµåŒ…</h4><p class="text-xs text-gray-500">é›–ç„¶å°ç£æœ‰è³£ï¼Œä½†ç¦å²¡é™å®šå£å‘³å€¼å¾—å¸¶ï¼</p></div>
                            </li>
                            <li class="flex gap-3 items-center">
                                <span class="text-2xl">ğŸŒ¶ï¸</span>
                                <div><h4 class="font-bold text-gray-700">æŸšå­èƒ¡æ¤’</h4><p class="text-xs text-gray-500">ä¹å·ç‰¹ç”¢èª¿å‘³æ–™ï¼Œæ¸…æ–°çš„æŸšå­é¦™å¸¶é»è¾£ã€‚</p></div>
                            </li>
                        </ul>
                        <ul class="space-y-4">
                            <li class="flex gap-3 items-center">
                                <span class="text-2xl">ğŸŸ</span>
                                <div><h4 class="font-bold text-gray-700">YAMAYA è»Ÿç®¡æ˜å¤ªå­é†¬</h4><p class="text-xs text-gray-500">è¶…æ–¹ä¾¿ï¼æ“ å‡ºä¾†å°±èƒ½é…é£¯ã€å¡—éºµåŒ…ã€‚</p></div>
                            </li>
                            <li class="flex gap-3 items-center">
                                <span class="text-2xl">ğŸ¥š</span>
                                <div><h4 class="font-bold text-gray-700">çŸ³æ‘è¬ç››å ‚ é¶´ä¹ƒå­</h4><p class="text-xs text-gray-500">ç™¾å¹´è€åº—ï¼Œåƒæ°´ç…®è›‹ä¸€æ¨£å¯æ„›çš„æ£‰èŠ±ç³–ç”œé»ã€‚</p></div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="bg-yellow-50 p-4 rounded-xl border border-yellow-200 text-sm text-yellow-800 text-center mt-4">
                ğŸ’¡ <b>å°æ’‡æ­¥ï¼š</b> å¤§éƒ¨åˆ†ä¼´æ‰‹ç¦®åœ¨ <b>ç¦å²¡æ©Ÿå ´å…ç¨…åº—</b> éƒ½è²·å¾—åˆ°ï¼Œå»ºè­°æœ€å¾Œä¸€å¤©å†ä¸€æ¬¡è²·é½Šï¼
            </div>
        </div>
    </template>

    <template id="vjw-template">
        <div class="space-y-6 animate-fade-in fade-enter">
            <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-3xl p-8 border border-blue-200 relative overflow-hidden">
                <div class="relative z-10">
                    <h2 class="text-3xl font-bold text-blue-900 mb-4">ğŸ“± VJW ç”³è«‹æ•™å­¸</h2>
                    <p class="text-blue-800 opacity-90 leading-relaxed text-lg">
                        åª½åª½åˆ¥æ“”å¿ƒï¼Œåªè¦è·Ÿè‘—ä¸‹é¢çš„æ­¥é©Ÿåšï¼Œå°±å¯ä»¥è¼•é¬†å®Œæˆæ—¥æœ¬å…¥å¢ƒæ‰‹çºŒå›‰ï¼<br>
                        å¦‚æœä¸æ¸…æ¥šï¼Œéš¨æ™‚å•æˆ‘å€‘å–”ï¼ğŸ˜Š
                    </p>
                    <div class="flex gap-2 mt-4 flex-wrap">
                        <a href="https://www.vjw.digital.go.jp/" target="_blank" class="bg-blue-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-700 transition shadow-md flex-1 text-center">
                            ğŸ‘‰ 1. é»æˆ‘æ‰“é–‹ VJW å®˜æ–¹ç¶²ç«™
                        </a>
                        <a href="https://djbcard.com/visitjapanweb/" target="_blank" class="bg-white text-blue-600 border border-blue-200 px-6 py-3 rounded-xl font-bold hover:bg-blue-50 transition shadow-md flex-1 text-center">
                            ğŸ“– 2. çœ‹è¶…è©³ç´°åœ–æ–‡æ•™å­¸ (DJB)
                        </a>
                    </div>
                </div>
            </div>

            <!-- Step 1 -->
            <div class="bg-white p-6 rounded-2xl border border-gray-200 shadow-sm">
                <h3 class="font-bold text-xl text-gray-800 mb-4 flex items-center gap-2">
                    <span class="bg-blue-100 text-blue-800 w-8 h-8 rounded-full flex items-center justify-center text-sm">1</span>
                    æº–å‚™è³‡æ–™
                </h3>
                <p class="text-gray-600 mb-4">è«‹å…ˆæº–å‚™å¥½ä»¥ä¸‹æ±è¥¿åœ¨æ‰‹é‚Šï¼š</p>
                <div class="grid grid-cols-2 gap-4 text-sm font-bold text-gray-700 text-center">
                    <div class="bg-gray-50 p-3 rounded-lg border border-gray-200">
                        <div class="text-4xl mb-2">ğŸ›‚</div>
                        è­·ç…§
                    </div>
                    <div class="bg-gray-50 p-3 rounded-lg border border-gray-200">
                         <div class="text-4xl mb-2">ğŸ«</div>
                        èˆªç­è³‡è¨Š (BR106)
                    </div>
                    <div class="bg-gray-50 p-3 rounded-lg border border-gray-200">
                         <div class="text-4xl mb-2">ğŸ¨</div>
                        é£¯åº—åœ°å€ (JR Kyushu Hotel)
                    </div>
                    <div class="bg-gray-50 p-3 rounded-lg border border-gray-200">
                         <div class="text-4xl mb-2">ğŸ“§</div>
                        Email
                    </div>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="bg-white p-6 rounded-2xl border border-gray-200 shadow-sm">
                <h3 class="font-bold text-xl text-gray-800 mb-4 flex items-center gap-2">
                    <span class="bg-blue-100 text-blue-800 w-8 h-8 rounded-full flex items-center justify-center text-sm">2</span>
                    è¨»å†Š & ç™»éŒ„
                </h3>
                <ul class="space-y-4 text-gray-600">
                    <li>1. é»æ“Šä¸Šé¢çš„æŒ‰éˆ•æ‰“é–‹ç¶²ç«™ï¼Œé¸ã€Œå»ºç«‹æ–°å¸³è™Ÿã€ã€‚</li>
                    <li>2. è¼¸å…¥ Email å’Œè¨­å®šå¯†ç¢¼ (å¯†ç¢¼è¦è¨˜ä¸‹ä¾†å–”ï¼)ã€‚</li>
                    <li>3. ç™»å…¥å¾Œï¼Œé»é¸ã€Œæœ¬äººè³‡æ–™ã€ï¼Œç”¨æ‰‹æ©Ÿç›¸æ©Ÿæ‹è­·ç…§ä¸Šå‚³ï¼Œç³»çµ±æœƒè‡ªå‹•å¡«å¯«è³‡æ–™ã€‚</li>
                </ul>
            </div>

             <!-- Step 3 -->
            <div class="bg-white p-6 rounded-2xl border border-gray-200 shadow-sm">
                <h3 class="font-bold text-xl text-gray-800 mb-4 flex items-center gap-2">
                    <span class="bg-blue-100 text-blue-800 w-8 h-8 rounded-full flex items-center justify-center text-sm">3</span>
                    ç™»éŒ„è¡Œç¨‹
                </h3>
                <ul class="space-y-4 text-gray-600">
                    <li>1. é»é¸ã€Œç™»éŒ„æ–°è¡Œç¨‹ã€ã€‚</li>
                    <li>2. è¼¸å…¥æ—…è¡Œåç¨± (ä¾‹å¦‚ï¼šä¹å·è¡Œ)ã€‚</li>
                    <li>3. è¼¸å…¥æŠµé”æ—¥æœŸ (2025/1/22) å’Œèˆªç­è™Ÿ (BR106)ã€‚</li>
                    <li>4. è¼¸å…¥æ—¥æœ¬ä½å®¿åœ°å€ (å¯ä»¥è¤‡è£½æˆ‘å€‘è¡Œç¨‹è¡¨è£¡çš„)ã€‚</li>
                </ul>
            </div>

            <!-- Step 4 -->
            <div class="bg-white p-6 rounded-2xl border border-gray-200 shadow-sm">
                <h3 class="font-bold text-xl text-gray-800 mb-4 flex items-center gap-2">
                    <span class="bg-blue-100 text-blue-800 w-8 h-8 rounded-full flex items-center justify-center text-sm">4</span>
                    ç”¢ç”Ÿ QR Code (æœ€é‡è¦!)
                </h3>
                <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-xl text-yellow-800 text-center mb-4">
                    âš ï¸ <b>å®Œæˆå¾Œè«‹å‹™å¿…æˆªåœ–ä¿å­˜ï¼</b><br>
                    (å› ç‚ºæ©Ÿå ´ç¶²è·¯æœ‰æ™‚å€™æœƒè·‘ä¸å‹•)
                </div>
                <ul class="space-y-4 text-gray-600">
                    <li>1. é»é€²å‰›å‰›å»ºç«‹çš„è¡Œç¨‹ã€‚</li>
                    <li>2. é»é¸ã€Œå…¥å¢ƒå¯©æŸ¥åŠæµ·é—œç”³å ±ã€ã€‚</li>
                    <li>3. å¡«å¯«ç°¡å–®å•å· (éƒ½é¸ã€Œç„¡ã€)ã€‚</li>
                    <li>4. æœ€å¾Œæœƒå‡ºç¾ä¸€å€‹ <b>QR Code</b>ã€‚</li>
                    <li>5. <b>è«‹æŠŠé€™å€‹ QR Code ç•«é¢æˆªåœ–å­˜åœ¨æ‰‹æ©Ÿç›¸ç°¿è£¡ï¼</b></li>
                </ul>
            </div>
        </div>
    </template>

    <script>
        // --- Default Data with Dates ---
        const defaultTripData = {
            mainTitle: "ç‹å®¶åŒ—ä¹å·å…­æ—¥è¡Œ",
            subTitle: "å¤§åˆ† âœ• åˆ¥åºœ âœ• æŸ³å· âœ• ç¦å²¡",
            introTitle: "æ—…ç¨‹æ¦‚è¦½",
            introDesc: "é€™æ˜¯ä¸€è¶Ÿç‚ºç‹å®¶é‡èº«æ‰“é€ çš„å…­æ—¥åŒ—ä¹å·ä¹‹æ—…ã€‚æˆ‘å€‘å°‡é€ è¨ªå¤§åˆ†ã€åˆ¥åºœã€ç”±å¸ƒé™¢ã€æŸ³å·èˆ‡ç¦å²¡ã€‚<br>è¡Œç¨‹åŒ…å«äº†æº«æ³‰ã€è§€å…‰åˆ—è»Šã€éŠèˆ¹ä»¥åŠç•¶åœ°çš„ç‰¹è‰²ç¾é£Ÿã€‚<br>è«‹æ”¾æ…¢è…³æ­¥ï¼Œäº«å—é€™æ®µç¾å¥½çš„æ—…ç¨‹ã€‚",
            days: [
                {
                    day: 1,
                    date: "1/22 (å››)",
                    title: "æŠµé”ä¹å· & æ©Ÿå ´åƒå°ç‰©",
                    focus: "ä¹å·ä¹‹æ—…å•Ÿç¨‹ï¼ğŸœ æ©Ÿå ´åƒå°ç‰© â” ğŸš„ æ­ä¹˜è—è‰²éŸ³é€Ÿè™Ÿå¥”é¦³ â” ğŸ¥© å¤§åˆ†å¸‚å€äº«ç”¨è±å¾Œç‰›æ™šé¤",
                    tags: ["ç§»å‹•æ—¥", "ç¾é£Ÿ", "æ‹‰éºµ"],
                    activities: [
                        { time: "11:15", title: "æŠµé”ç¦å²¡æ©Ÿå ´", type: "transport", desc: "å‡ºé—œç´„ 40-60 åˆ†é˜ï¼Œæ­æ¥é§è»Šè‡³ã€Œåœ‹å…§ç·šèˆªå»ˆã€3Fã€‚", icon: "ğŸ›¬" },
                        { time: "12:00", title: "åˆé¤ï¼šå…ˆåœ¨æ©Ÿå ´åƒé»å°ç‰©", type: "food", desc: "æ‹‰éºµæ»‘èµ°è·¯åœ¨åœ‹å…§ç·šèˆªå»ˆ3Fã€‚ä¹Ÿå¯å»åšå¤šè»Šç«™åƒï¼Œä½†è¡Œæç§»å‹•æ¯”è¼ƒéº»ç…©ä¸€é»ã€‚", icon: "ğŸœ", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Hakata_ramen_by_gusa_in_Kyoto.jpg/640px-Hakata_ramen_by_gusa_in_Kyoto.jpg" },
                        { time: "13:00", title: "å‰å¾€åšå¤šç«™", type: "transport", desc: "æ­ä¹˜åœ°éµè‡³åšå¤šç«™ (ç´„5åˆ†é˜)ã€‚", icon: "ğŸš‡" },
                        { time: "13:15", title: "åšå¤šç«™ï¼šè³¼è²·è»Šç¥¨", type: "transport", desc: "å‰å¾€ç¶ è‰²çª—å£è³¼è²·å¾€å¤§åˆ†çš„ç‰¹æ€¥åˆ¸ (Sonic è™Ÿ)ã€‚", icon: "ğŸš‰" },
                        { time: "13:36", title: "ç§»å‹•ï¼šå‰å¾€å¤§åˆ†", type: "transport", desc: "é è¨ˆæ­ä¹˜ **Sonic 25** (13:36ç™¼ - 15:43æŠµ)ã€‚\nè‹¥å‡ºé—œé †åˆ©è¶•å¾—ä¸Šï¼Œå¯è²· **Sonic 23** (13:06ç™¼ - 15:16æŠµ)ã€‚\n*å°æ’‡æ­¥ï¼šåœ¨å°å€‰ç«™è¨˜å¾—å°‡åº§æ¤…æ—‹è½‰ 180 åº¦ã€‚*", icon: "ğŸš„", image: "https://upload.wikimedia.org/wikipedia/commons/f/f6/JR_Kyushu_883_series_renewed_Sonic.jpg" },
                        { time: "16:00", title: "é£¯åº— Check-in", type: "stay", desc: "JR Kyushu Hotel Blossom Oita (è»Šç«™ç›´çµ)ï¼Œå…ˆä¼‘æ¯ä¸€ä¸‹ã€‚", icon: "ğŸ¨" },
                        { time: "18:30", title: "å¸‚å€æ™šé¤", type: "food", desc: "å‰å¾€å¤§åˆ†å¸‚å€ï¼ˆä¸­å¤®ç”ºå•†åº—è¡—ï¼‰ï¼Œæ¨è–¦äº«ç”¨è±å¾Œç‰›æˆ–åœ¨åœ°å±…é…’å±‹ã€‚", icon: "ğŸ½ï¸" }
                    ]
                },
                {
                    day: 2,
                    date: "1/23 (äº”)",
                    title: "æ…¢éŠç«¥è©±å°é®ï¼šç”±å¸ƒé™¢",
                    focus: "COMICO ç¾è¡“é¤¨ã€é‡‘é±—æ¹–ã€æ¹¯ä¹‹åªè¡—é“ã€é‡œé£¯",
                    tags: ["è‡ªç„¶", "è—è¡“", "ç¾é£Ÿ"],
                    activities: [
                        { time: "08:30", title: "é£¯åº—æ—©é¤", type: "food", desc: "å‹™å¿…äº«ç”¨ï¼é€™å®¶æ—©é¤è©•åƒ¹æ¥µé«˜ã€‚", icon: "ğŸ¥" },
                        { time: "10:00", title: "å‰å¾€ç”±å¸ƒé™¢", type: "transport", desc: "æ­ä¹˜ JR (ç´„10:00ç™¼)ï¼Œé è¨ˆ 11:15 æŠµé”ã€‚*(æ™®é€šè»Š 10:11 æˆ– ç‰¹æ€¥ 10:06)*", icon: "ğŸš‚", image: "https://upload.wikimedia.org/wikipedia/commons/9/91/Yufuin_Station_2012.JPG" },
                        { time: "11:15", title: "æŠµé” & æ•£ç­–", type: "sightseeing", desc: "æŠµé”ç”±å¸ƒé™¢ã€‚é€›ä¸€é€›æ¥åˆé¤ï¼Œäº«å—æ‚ é–’æ°£æ°›ã€‚", icon: "ğŸš¶" },
                        { time: "12:30", title: "åˆé¤ï¼šç”±å¸ƒã¾ã¶ã— å¿ƒ (å·²é ç´„)", type: "food", desc: "æ¹¯å¸ƒé™¢é§…å‰æ”¯åº—ã€‚è±å¾Œç‰›é‡œé£¯ä¸‰åƒï¼<br><a href='https://maps.app.goo.gl/JgkMjfRPL3N5yoFU8?g_st=ic' target='_blank' class='text-orange-500 underline hover:text-orange-600'>ğŸ“ æŸ¥çœ‹åœ°åœ–</a>", icon: "ğŸ²" },
                        { time: "14:00", title: "COMICO ART MUSEUM", type: "sightseeing", desc: "åƒè§€éšˆç ”å¾è¨­è¨ˆçš„ç¾ä»£ç¾è¡“é¤¨ï¼Œæ¬£è³è‰é–“å½Œç”Ÿèˆ‡å¥ˆè‰¯ç¾æ™ºä½œå“ã€‚(éœ€é ç´„)", icon: "ğŸ¨" },
                        { time: "15:00", title: "æ¹¯ä¹‹åªè¡—é“ & ç«¥è©±æ‘", type: "sightseeing", desc: "ç¾è¡“é¤¨çµæŸå¾Œï¼Œç¹¼çºŒé€› Yufuin Floral Villageã€å²åŠªæ¯”èŒ¶å±‹ã€‚", icon: "ğŸŒ¸" },
                        { time: "16:00", title: "é‡‘é±—æ¹– & ä¸‹åˆèŒ¶", type: "sightseeing", desc: "æ¬£è³é‡‘é±—æ¹–ç¾æ™¯ï¼Œä¸¦åœ¨æ¹–ç•” Cafe La Ruche å–æ¯å’–å•¡ä¼‘æ¯ã€‚", icon: "â˜•", image: "https://upload.wikimedia.org/wikipedia/commons/c/c3/Kinrin_Lake_in_morning.jpg" },
                        { time: "17:30", title: "è¿”å›å¤§åˆ†", type: "transport", desc: "æ­ä¹˜ JR è¿”å›å¤§åˆ†ç«™ã€‚", icon: "ğŸš„" },
                        { time: "19:00", title: "æ™šé¤ï¼šå¤§åˆ†å¸‚å€", type: "food", desc: "åœ¨å¤§åˆ†ä¸­å¤®é€šå•†åº—è¡—æ‰¾é–“å±…é…’å±‹é«”é©—åœ¨åœ°æ°£æ°›ã€‚", icon: "ğŸ¢" }
                    ]
                },
                {
                    day: 3,
                    date: "1/24 (å…­)",
                    title: "åˆ¥åºœåœ°ç„ ç”±å¸ƒé™¢ä¹‹æ£®",
                    focus: "åˆ¥åºœåœ°ç„ç²¾è¯ã€åœ°ç„è’¸æ–™ç†ã€ç”±å¸ƒé™¢ä¹‹æ£®å›ç¨‹ã€ç‡’è‚‰å¤§é¤",
                    tags: ["åœ°ç„æº«æ³‰", "è§€å…‰åˆ—è»Š", "ç‡’è‚‰"],
                    activities: [
                        { time: "09:00", title: "é€€æˆ¿ Check-out", type: "transport", desc: "å¸¶è‘—è¡Œææ­ä¹˜ JR è‡³åˆ¥åºœç«™ (15åˆ†é˜)ï¼Œè¡Œæå¯„æ”¾è»Šç«™ã€‚", icon: "ğŸ‘‹" },
                        { time: "10:00", title: "åœ°ç„æº«æ³‰å·¡ç¦®", type: "sightseeing", desc: "æ­å·´å£«è‡³ã€Œæµ·åœ°ç„å‰ã€ï¼Œåƒè§€ æµ·åœ°ç„ (æœ€ç¾)ã€ç¶åœ°ç„ (äº’å‹•å¤š)ã€‚", icon: "ğŸ‘¹", image: "https://upload.wikimedia.org/wikipedia/commons/e/ee/Beppu_umijigoku.jpg" },
                        { time: "12:00", title: "åˆé¤ï¼šåœ°ç„è’¸", type: "food", desc: "åœ°ç„è’¸å·¥æˆ¿ éµè¼ªï¼Œé«”é©—ç”¨æº«æ³‰è’¸æ°£è’¸æµ·é®®ã€è”¬èœã€‚", icon: "ğŸ¥š" },
                        { time: "14:43", title: "ç§»å‹•ï¼šç”±å¸ƒé™¢ä¹‹æ£® 4è™Ÿ (å·²è¨‚ç¥¨)", type: "transport", desc: "åˆ¥åºœç™¼(14:43) â†’ åšå¤šæŠµ(18:10)ã€‚<br>åº§ä½ï¼š2è™Ÿè»Š 5è™ŸABã€6è™ŸAB (æŒ‡å®šå¸­)ã€‚<br>ğŸ± å·²é è¨‚ä¾¿ç•¶ï¼Œè»Šä¸Šäº«ç”¨ï¼", icon: "ğŸš‚", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/JRK_Kiha72_Yufuin-no-mori_Kyudai_Line.jpg/640px-JRK_Kiha72_Yufuin-no-mori_Kyudai_Line.jpg" },
                        { time: "18:30", title: "é£¯åº— Check-in", type: "stay", desc: "ä¸‰äº•èŠ±åœ’é£¯åº—ç¦å²¡ç¥‡åœ’ï¼Œå¾åšå¤šç«™åšå¤šå£æ­¥è¡Œç´„ 7 åˆ†é˜ã€‚", icon: "ğŸ¨" },
                        { time: "19:00", title: "æ™šé¤ï¼šè—¥é™¢ç‡’è‚‰ (å·²è¨‚ä½)", type: "food", desc: "å‰å¾€ç‡’è‚‰æ¿€æˆ°å€ã€Œè—¥é™¢ã€ã€‚æ¨è–¦ï¼šNikuichi (ã«ãã„ã¡) æˆ– Bakuroã€‚", icon: "ğŸ¥©" }
                    ]
                },
                {
                    day: 4,
                    date: "1/25 (æ—¥)",
                    title: "æŸ³å·éŠèˆ¹èˆ‡å¤ªå®°åºœ",
                    focus: "æŸ³å·éŠèˆ¹ã€å…ƒç¥–æœ¬å‰å±‹é°»é­šé£¯ã€å¤ªå®°åºœå¤©æ»¿å®®ã€Big Cameraæ¡è³¼ã€ShinShinæ‹‰éºµ",
                    tags: ["æ°´é„‰", "é°»é­šé£¯", "æ•£ç­–"],
                    activities: [
                        { time: "09:00", title: "å‰å¾€å¤©ç¥è³¼ç¥¨", type: "transport", desc: "æ­åœ°éµè‡³å¤©ç¥ç«™ï¼Œè³¼è²·ã€Œå¤ªå®°åºœæŸ³å·è§€å…‰å¥—ç¥¨ã€å¾Œæ­ä¹˜è¥¿éµé›»è»Šã€‚", icon: "ğŸš‡" },
                        { time: "10:30", title: "æŸ³å·éŠèˆ¹ (å·ä¸‹ã‚Š)", type: "sightseeing", desc: "é«”é©—å……æ»¿è©©æ„çš„é‹æ²³å°èˆŸï¼Œè½èˆ¹å¤«å“¼å”±å°èª¿ã€‚", icon: "ğŸ›¶", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Yanagawa_kawatudari.JPG/640px-Yanagawa_kawatudari.JPG" },
                        { time: "12:00", title: "åˆé¤ï¼šå…ƒç¥– æœ¬å‰å±‹", type: "food", desc: "æŸ³å·å¿…åƒç™¾å¹´è€åº—ï¼è’¸ç± é°»é­šé£¯ç‚­çƒ¤é¦™æ°£é€¼äººã€‚", icon: "ğŸ±", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Unadon_by_yoppy_in_Nagoya.jpg/640px-Unadon_by_yoppy_in_Nagoya.jpg" },
                        { time: "13:30", title: "ç§»å‹•ï¼šå‰å¾€å¤ªå®°åºœ", type: "transport", desc: "æŸ³å· â†’ å¤ªå®°åºœ (é›»è»Šç´„ 50 åˆ†é˜)ã€‚", icon: "ğŸšŒ" },
                        { time: "14:30", title: "å¤ªå®°åºœå¤©æ»¿å®®", type: "sightseeing", desc: "åƒæ‹œå­¸å•ä¹‹ç¥ã€æ‘¸å¾¡ç¥ç‰›ã€åƒæ¢…æé¤…ã€‚*è‹¥æƒ³åƒä¸€è˜­äº”è§’å½¢ç¢—ï¼Œåˆ†åº—å°±åœ¨åƒé“ä¸Šï¼*", icon: "â›©ï¸", image: "https://upload.wikimedia.org/wikipedia/commons/a/a4/Dazaifu_Tenman-gu_Honden.jpg" },
                        { time: "16:45", title: "ç§»å‹•ï¼šè¿”å›å¤©ç¥", type: "transport", desc: "å¾å¤ªå®°åºœç«™æ­ä¹˜è¥¿éµé›»è»Šè¿”å›è¥¿éµç¦å²¡(å¤©ç¥)ç«™ (ç´„30åˆ†é˜)ã€‚", icon: "ğŸšƒ" },
                        { time: "17:30", title: "æ™šé¤ï¼šShinShin æ‹‰éºµ (å¤©ç¥æœ¬åº—)", type: "food", desc: "åšå¤šç´”æƒ…æ‹‰éºµä»£è¡¨ï¼å°±åœ¨å¤©ç¥å•†åœˆï¼Œé€›å®Œè¡—ç›´æ¥å»åƒè¶…é †è·¯ã€‚å¿…é»ï¼šç…®ç‰å­æ‹‰éºµã€ä¸€å£é¤ƒå­ã€‚*(äººå¤šå¯æ”¹å» PARCO åº—)*", icon: "ğŸœ" },
                        { time: "19:00", title: "Big Camera / è—¥å¦åº—", type: "sightseeing", desc: "å‰å¾€å¤©ç¥ Big Camera æ¡è³¼é›»å™¨ï¼Œæˆ–æ˜¯åˆ°é™„è¿‘çš„è—¥å¦åº—è£œè²¨ (é–‹åˆ°å¾ˆæ™š)ã€‚", icon: "ğŸ›ï¸" }
                    ]
                },
                {
                    day: 5,
                    date: "1/26 (ä¸€)",
                    title: "è—¥é™¢é¸ç‰©/å¤§æ¿ å…¬åœ’",
                    focus: "æ«›ç”°ç¥ç¤¾ã€è—¥é™¢é¸ç‰©åº—ã€å¤§æ¿ å…¬åœ’ã€æ°´ç‚Šé‹",
                    tags: ["ç¾æ™¯", "é¸ç‰©", "é‹ç‰©"],
                    activities: [
                        { time: "10:00", title: "æ«›ç”°ç¥ç¤¾", type: "sightseeing", desc: "é£¯åº—æ­¥è¡Œå³é”ï¼Œåšå¤šçš„å®ˆè­·ç¥ï¼Œå¿…çœ‹å·¨å¤§è£é£¾å±±ç¬ ã€‚", icon: "â›©ï¸" },
                        { time: "11:00", title: "å·ç«¯é€šå•†åº—è¡—", type: "sightseeing", desc: "å……æ»¿åœ¨åœ°ç”Ÿæ´»æ„Ÿçš„å•†åº—è¡—ã€‚åˆé¤å¯åƒ å·ç«¯å–„å“‰å»£å ´ ç´…è±†æ¹¯ã€‚", icon: "ğŸš¶" },
                        { time: "13:00", title: "è—¥é™¢ (Yakuin) è³ªæ„Ÿé¸ç‰©", type: "sightseeing", desc: "æ­ä¹˜ä¸ƒéšˆç·šè‡³è—¥é™¢ç«™ã€‚æ¢è¨ª BBB Potters ç­‰ç”Ÿæ´»é›œè²¨ååº—ï¼Œæ°£æ°›æ‚ é–’ã€‚", icon: "ğŸ«–" },
                        { time: "15:00", title: "å¤§æ¿ å…¬åœ’ & æ—¥æœ¬åº­åœ’", type: "sightseeing", desc: "æ­ä¹˜ä¸ƒéšˆç·šè‡³ã€Œå…­æœ¬æ¾ç«™ã€æˆ–å·´å£«å‰å¾€ã€‚åƒè§€å‚³çµ±æ—¥å¼åº­åœ’ã€ç¦å²¡å¸‚ç¾è¡“é¤¨ (è‰é–“å½Œç”Ÿå—ç“œ)ã€‚", icon: "ğŸ¦¢", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/Ohori_Park_04.JPG/640px-Ohori_Park_04.JPG" },
                        { time: "16:30", title: "æ¹–ç•”ä¸‹åˆèŒ¶ï¼š&LOCALS", type: "food", desc: "å¤§æ¿ å…¬åœ’å…§çš„è³ªæ„Ÿé¸ç‰©åº—å…¼å’–å•¡å»³ï¼Œå¿…åƒå…«å¥³èŒ¶èˆ‡æœ€ä¸­é¤…ã€‚", icon: "ğŸµ" },
                        { time: "19:30", title: "æ™šé¤ï¼šæ°´ç‚Šé‹ (å·²è¨‚ä½)", type: "food", desc: "æ°´ç‚Šã æ©™ (Daidai)ï¼Œç±³å…¶æ—å¿…æ¯”ç™»æ¨è–¦ï¼Œæ¹¯é ­è¶…æ¿ƒéƒï¼(å·²ä»˜è¨‚é‡‘ï¼š16600æ—¥åœ“)", icon: "ğŸ¥˜" }
                    ]
                },
                {
                    day: 6,
                    date: "1/27 (äºŒ)",
                    title: "æœ€å¾Œè¡åˆº & å¿«æ¨‚è¿”å®¶",
                    focus: "æ‚ é–’é€€æˆ¿ã€æ©Ÿå ´å…ç¨…åº—æƒè²¨",
                    tags: ["è³¼ç‰©", "è¿”ç¨‹"],
                    activities: [
                        { time: "10:00", title: "æ‚ é–’é€€æˆ¿ Check-out", type: "transport", desc: "ä¸ç”¨è¶•è¡Œç¨‹ï¼Œå¸¶è‘—è¡Œæç›´æ¥å‰å¾€ç¦å²¡æ©Ÿå ´ã€‚", icon: "ğŸ‘‹" },
                        { time: "10:40", title: "æŠµé”æ©Ÿå ´ (åœ‹éš›ç·š)", type: "transport", desc: "è¾¦ç†ç™»æ©Ÿæ‰‹çºŒã€è¨—é‹è¡Œæã€‚", icon: "ğŸ›¬" },
                        { time: "11:30", title: "å…ç¨…åº—æœ€å¾Œæƒè²¨", type: "sightseeing", desc: "ç¦å²¡æ©Ÿå ´å…ç¨…åº—éå¸¸å¥½é€›ï¼Œä¹å·åç”¢ä¸€ç¶²æ‰“ç›¡ã€‚å¿…è²·ï¼šç¦ç ‚å±‹é•·å´è›‹ç³•ã€åšå¤šé€šé¥…é ­ã€Menbei ä»™è²ã€Royceã€‚", icon: "ğŸ", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/93/Karashi_Mentaiko_001.jpg/640px-Karashi_Mentaiko_001.jpg" },
                        { time: "12:30", title: "æœ€å¾Œåˆé¤", type: "food", desc: "åœ¨æ©Ÿå ´äº«ç”¨æœ€å¾Œçš„æ—¥æœ¬ç¾é£Ÿã€‚", icon: "ğŸœ" },
                        { time: "15:55", title: "èµ·é£›", type: "transport", desc: "å¸¶è‘—æ»¿æ»¿çš„å›æ†¶èˆ‡æˆ°åˆ©å“å›å®¶ã€‚", icon: "âœˆï¸" }
                    ]
                }
            ],
            // Packing list merged into Todo List for initial load
            todoList: {
                "ğŸ’ è¡Œææ¸…å–®": [
                    {text: "è­·ç…§ (æ•ˆæœŸéœ€6å€‹æœˆä»¥ä¸Š)", done: false},
                    {text: "VJW (Visit Japan Web) æˆªåœ–", done: false},
                    {text: "æ—¥å¹£ç¾é‡‘ (å±‹å°/äº¤é€šå¡ç”¨)", done: false},
                    {text: "è¡Œå‹•é›»æº & å……é›»ç·š", done: false},
                    {text: "ç¶²å¡ / Roaming", done: false},
                    {text: "å¥½èµ°çš„é‹å­ (æ­¥æ•¸å¾ˆå¤š)", done: false},
                    {text: "è¼•ä¾¿è³¼ç‰©è¢‹ (ç’°ä¿è¢‹)", done: false}
                ],
                "è¡Œå‰æº–å‚™": [
                    {text: "ç¢ºèªè­·ç…§æ•ˆæœŸ", done: false},
                    {text: "å¡«å¯« VJW å…¥å¢ƒå¯©æŸ¥", done: false},
                    {text: "è³¼è²·æ—…éŠä¿éšª", done: false},
                    {text: "é ç´„ Wifi æ©Ÿ / ç¶²å¡", done: false}
                ],
                "äº¤é€šè³¼ç¥¨æ¸…å–® (å¾…è¾¦)": [
                    {text: "Day 1 åšå¤šâ†’å¤§åˆ† (JR Sonic)", done: false},
                    {text: "Day 2 å¤§åˆ†â†”ç”±å¸ƒé™¢ (JR)", done: false},
                    {text: "Day 3 å¤§åˆ†â†’åˆ¥åºœ (JR)", done: false},
                    {text: "Day 3 åˆ¥åºœåœ°ç„é€šç¥¨ (è¦–æƒ…æ³)", done: false},
                    {text: "Day 4 å¤ªå®°åºœæŸ³å·å¥—ç¥¨ (å¤©ç¥ç«™)", done: false},
                ],
                "é ç´„äº‹é …": [
                    {text: "12/24 ç”±å¸ƒé™¢ä¹‹æ£®è¨‚ç¥¨ (å·²å®Œæˆ)", done: true},
                    {text: "æ‰¾å¤§åˆ†é¤å»³", done: false},
                    {text: "COMICO ç¾è¡“é¤¨é ç´„", done: false}
                ]
            }
        };

        // --- Logic ---
        // Force update to v53 to ensure new data (removed edit buttons) is loaded
        let storedData = JSON.parse(localStorage.getItem('kyushu_trip_data'));
        let tripData = defaultTripData; // Default to new data for this version to force update

        // If user has edited data, we might want to keep it, but here we prioritize the requested updates.
        // To be safe, we overwrite with the requested new data structure.
        localStorage.setItem('kyushu_trip_data', JSON.stringify(tripData));

        let currentView = 'itinerary'; // Default view changed to itinerary
        let currentDayIndex = 0;
        let activeFilter = 'all';

        const mainContent = document.getElementById('main-content');
        const dayNav = document.getElementById('day-nav');
        // Note: packingListEl is removed from sidebar
        const sidebarContainer = document.getElementById('sidebar-container');

        document.addEventListener('DOMContentLoaded', () => {
            renderDayNav();
            switchView('itinerary');
        });

        // --- View Switching ---
        window.switchView = (view) => {
            currentView = view;
            const buttons = document.querySelectorAll('nav button');
            buttons.forEach(btn => {
                if((view === 'info' && btn.innerText.includes('é‡é»')) || 
                   (view === 'itinerary' && btn.innerText.includes('è¡Œç¨‹')) ||
                   (view === 'souvenir' && btn.innerText.includes('ä¼´æ‰‹ç¦®')) ||
                   (view === 'transport' && btn.innerText.includes('äº¤é€š')) ||
                   (view === 'vjw' && btn.innerText.includes('VJW')) ||
                   (view === 'todo' && btn.innerText.includes('å¾…è¾¦'))) {
                    btn.classList.remove('bg-white', 'text-gray-600', 'border-gray-200');
                    btn.classList.add('bg-orange-100', 'text-orange-700', 'border-transparent');
                } else {
                    btn.classList.add('bg-white', 'text-gray-600', 'border-gray-200');
                    btn.classList.remove('bg-orange-100', 'text-orange-700', 'border-transparent');
                }
            });

            // Toggle Sidebar for Day Selection
            if (view === 'todo' || view === 'souvenir' || view === 'info' || view === 'transport' || view === 'vjw') {
                sidebarContainer.classList.add('hidden');
                // Adjust main content to full width when sidebar is hidden
                document.getElementById('main-content').classList.remove('lg:col-span-9');
                document.getElementById('main-content').classList.add('lg:col-span-12');
            } else {
                sidebarContainer.classList.remove('hidden');
                document.getElementById('main-content').classList.remove('lg:col-span-12');
                document.getElementById('main-content').classList.add('lg:col-span-9');
            }

            if (view === 'info') renderInfo();
            else if (view === 'souvenir') renderSouvenir();
            else if (view === 'transport') renderTransport();
            else if (view === 'todo') renderTodo();
            else if (view === 'vjw') renderVjw();
            else renderItinerary(currentDayIndex);
        };

        function renderDayNav() {
            dayNav.innerHTML = tripData.days.map((d, index) => `
                <button onclick="selectDay(${index})" 
                    class="day-btn flex-shrink-0 w-full text-left px-3 py-2 rounded-lg border border-orange-100 hover:bg-orange-50 transition flex flex-col justify-center items-center text-center group ${index === 0 ? 'bg-orange-50 border-orange-200 ring-1 ring-orange-200' : 'bg-white'}"
                    id="day-btn-${index}">
                    <span class="text-xs font-bold text-orange-500 uppercase">Day ${d.day} <span class="text-gray-400 ml-1 font-normal">${d.date}</span></span>
                    <h4 class="font-bold text-gray-700 text-xs truncate w-full group-hover:text-orange-700">${d.title.split('&')[0]}</h4>
                </button>
            `).join('');
        }

        window.selectDay = (index) => {
            currentDayIndex = index;
            document.querySelectorAll('.day-btn').forEach((btn, idx) => {
                if (idx === index) {
                    btn.classList.add('bg-orange-50', 'border-orange-200', 'ring-1', 'ring-orange-200');
                    btn.classList.remove('bg-white');
                } else {
                    btn.classList.remove('bg-orange-50', 'border-orange-200', 'ring-1', 'ring-orange-200');
                    btn.classList.add('bg-white');
                }
            });
            switchView('itinerary');
        };

        // --- Todo List Functions ---
        function renderTodo() {
            const template = document.getElementById('todo-template').content.cloneNode(true);
            const container = template.getElementById('todo-container');
            
            container.innerHTML = Object.keys(tripData.todoList).map(category => {
                const items = tripData.todoList[category];
                const listHtml = items.map((item, idx) => {
                    const lineThrough = item.done ? 'line-through text-gray-400' : 'text-gray-700';
                    const bg = item.done ? 'bg-green-500 border-green-500' : 'border-gray-300 bg-white';
                    
                    let contentHtml = `<span onclick="toggleTodo('${category}', ${idx})" class="${lineThrough} flex-1 cursor-pointer font-medium">${item.text}</span>`;

                    return `
                    <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg group">
                        <div onclick="toggleTodo('${category}', ${idx})" class="w-5 h-5 rounded border ${bg} flex items-center justify-center text-white text-xs cursor-pointer transition-colors shadow-sm">
                            ${item.done ? 'âœ“' : ''}
                        </div>
                        ${contentHtml}
                    </div>
                    `;
                }).join('');

                return `
                <div class="bg-white p-6 rounded-2xl border border-gray-200 shadow-sm hover-card">
                    <h3 class="font-bold text-lg text-gray-800 mb-4 border-b pb-2 border-green-100 flex justify-between items-center">
                        ${category}
                        <span class="text-xs font-normal text-gray-400 bg-gray-100 px-2 py-1 rounded-full">${items.filter(i=>i.done).length}/${items.length}</span>
                    </h3>
                    <div class="space-y-2">
                        ${listHtml || '<p class="text-gray-400 text-sm italic">å°šç„¡å¾…è¾¦äº‹é …</p>'}
                    </div>
                </div>
                `;
            }).join('');

            mainContent.innerHTML = '';
            mainContent.appendChild(template);
        }

        window.toggleTodo = (category, index) => {
            tripData.todoList[category][index].done = !tripData.todoList[category][index].done;
            saveData();
            renderTodo();
        };
        
        // --- Render Views ---

        function renderVjw() {
             const template = document.getElementById('vjw-template').content.cloneNode(true);
             mainContent.innerHTML = '';
             mainContent.appendChild(template);
        }

        function renderInfo() {
            const template = document.getElementById('info-template').content.cloneNode(true);
            mainContent.innerHTML = '';
            mainContent.appendChild(template);
        }

        function renderSouvenir() {
            const template = document.getElementById('souvenir-template').content.cloneNode(true);
            mainContent.innerHTML = '';
            mainContent.appendChild(template);
        }

        function renderTransport() {
            const template = document.getElementById('transport-template').content.cloneNode(true);
            mainContent.innerHTML = '';
            mainContent.appendChild(template);
        }

        function renderItinerary(dayIndex) {
            const dayData = tripData.days[dayIndex];
            const template = document.getElementById('itinerary-template').content.cloneNode(true);
            
            // Header
            template.querySelector('#day-title').innerText = `Day ${dayData.day}: ${dayData.title}`;
            template.querySelector('#day-desc').innerText = dayData.focus;
            template.querySelector('#day-tags').innerHTML = dayData.tags.map(t => 
                `<span class="bg-white/80 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold text-gray-600 shadow-sm">#${t}</span>`
            ).join('');

            const timelineContainer = template.querySelector('#timeline-container');
            const filteredActivities = activeFilter === 'all' 
                ? dayData.activities 
                : dayData.activities.filter(a => a.type === activeFilter);

            timelineContainer.innerHTML = filteredActivities.map((act, actIdx) => {
                let typeColor = 'bg-gray-100 text-gray-600';
                let typeBorder = 'border-gray-200';
                if (act.type === 'food') { typeColor = 'bg-red-50 text-red-600'; typeBorder = 'border-red-200'; }
                if (act.type === 'sightseeing') { typeColor = 'bg-green-50 text-green-600'; typeBorder = 'border-green-200'; }
                if (act.type === 'transport') { typeColor = 'bg-blue-50 text-blue-600'; typeBorder = 'border-blue-200'; }
                
                let imageHtml = '';
                // Since user requested no placeholder images for COMICO, we only show images if they are real URLs or remove logic if all placeholders are gone
                // Keeping logic but ensuring data has no placeholders
                if (act.image && !act.image.includes('placehold.co')) {
                    imageHtml = `
                    <div class="mt-3 h-32 w-full sketch-img-container">
                        <img src="${act.image}" alt="${act.title}" class="ghibli-filter" onerror="imgError(this)">
                    </div>`;
                }
                
                let contentHtml = `
                    <h4 class="font-bold text-gray-800 text-lg">${act.title}</h4>
                    <p class="text-sm text-gray-500 mt-1 leading-relaxed">${act.desc}</p>
                    ${imageHtml}
                    <span class="inline-block mt-2 text-[10px] uppercase font-bold px-2 py-0.5 rounded ${typeColor}">
                        ${act.type === 'food' ? 'ç¾é£Ÿ' : act.type === 'transport' ? 'äº¤é€š' : act.type === 'stay' ? 'ä½å®¿' : 'è§€å…‰'}
                    </span>
                `;

                return `
                <div class="relative pl-2 md:pl-2 group mb-4">
                    <div class="absolute left-0 top-0 w-12 md:w-12 text-center">
                        <span class="text-sm font-bold text-gray-400 font-mono group-hover:text-orange-500 transition">${act.time}</span>
                    </div>
                    <div class="absolute left-[50px] md:left-[58px] top-1.5 w-3 h-3 bg-white border-2 border-orange-300 rounded-full z-10 group-hover:scale-125 group-hover:bg-orange-500 transition"></div>
                    <div class="bg-white rounded-xl p-4 border ${typeBorder} shadow-sm hover-card ml-[60px] md:ml-[70px] relative">
                        <div class="flex items-start gap-3">
                            <span class="text-2xl">${act.icon}</span>
                            <div class="flex-1">
                                ${contentHtml}
                            </div>
                        </div>
                    </div>
                </div>
            `}).join('');

            // Footer Nav
            const navFooter = template.querySelector('#timeline-nav-footer');
            let footerHtml = '';
            if (dayIndex > 0) {
                footerHtml += `<button onclick="selectDay(${dayIndex - 1})" 
                    class="flex items-center gap-2 text-gray-500 hover:text-orange-600 transition group cursor-pointer">
                    <span class="text-lg group-hover:-translate-x-1 transition">â†</span>
                    <div class="text-left">
                        <div class="text-xs font-bold text-gray-400">ä¸Šä¸€å¤©</div>
                        <div class="text-sm font-bold">Day ${tripData.days[dayIndex - 1].day}</div>
                    </div>
                </button>`;
            } else { footerHtml += `<div></div>`; }
            if (dayIndex < tripData.days.length - 1) {
                footerHtml += `<button onclick="selectDay(${dayIndex + 1})" 
                    class="flex items-center gap-3 bg-orange-100 hover:bg-orange-200 text-orange-800 px-5 py-3 rounded-xl transition group shadow-sm cursor-pointer transform hover:scale-105 active:scale-95"><div class="text-right"><div class="text-xs font-bold text-orange-600 uppercase tracking-wide">å‰å¾€ä¸‹ä¸€å¤©</div><div class="text-lg font-bold">Day ${tripData.days[dayIndex + 1].day}</div></div><span class="text-xl group-hover:translate-x-1 transition">â†’</span></button>`;
            }
            navFooter.innerHTML = footerHtml;

            mainContent.innerHTML = '';
            mainContent.appendChild(template);
        }

        // --- AI Chat Logic ---
        const apiKey = ""; 

        function toggleChat() {
            const widget = document.getElementById('chat-widget');
            if (widget.style.display === 'none' || widget.style.display === '') {
                widget.style.display = 'flex';
                setTimeout(() => document.getElementById('user-input').focus(), 300);
            } else {
                widget.style.display = 'none';
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function addMessage(text, type) {
            const container = document.getElementById('chat-messages');
            const div = document.createElement('div');
            div.className = `message ${type}`;
            div.innerHTML = text.replace(/\n/g, '<br>');
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        async function sendMessage() {
            const input = document.getElementById('user-input');
            const message = input.value.trim();
            if (!message) return;

            addMessage(message, 'user-msg');
            input.value = '';

            const indicator = document.getElementById('typing-indicator');
            indicator.style.display = 'block';

            // Clean context
            const tripContext = JSON.stringify(tripData);

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `You are a helpful travel assistant for a Kyushu, Japan trip. 
                                The user's itinerary data is:
                                ---
                                ${tripContext}
                                ---
                                User Question: ${message}
                                
                                Instructions:
                                1. Answer based on the itinerary data provided.
                                2. Be concise, friendly, and helpful.
                                3. If asked for translations, provide Japanese text and pronunciation.
                                4. Respond in Traditional Chinese (ç¹é«”ä¸­æ–‡).`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                if (data.error) throw new Error(data.error.message);
                const aiResponse = data.candidates[0].content.parts[0].text;
                
                indicator.style.display = 'none';
                addMessage(aiResponse, 'ai-msg');

            } catch (error) {
                console.error('Error:', error);
                indicator.style.display = 'none';
                addMessage("æŠ±æ­‰ï¼Œæˆ‘ç¾åœ¨æœ‰é»å¿™ç¢Œï¼Œè«‹ç¨å¾Œå†è©¦ä¸€æ¬¡ï¼(API Error)", 'ai-msg');
            }
        }
    </script>
</body>
</html>
